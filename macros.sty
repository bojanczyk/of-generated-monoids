% Mikolaj Bojanczyk 2025
%  this is a set of common macros that I use for my projects

% basic math symbols, like \subseteq
\usepackage{amssymb}

% basic environments like align*
\usepackage{amsmath}
\usepackage{mathtools} % an extension of amsmath needed for I don't know what 

% the proof macro
\usepackage{proof}

% commuting diagrams
\usepackage{tikz-cd}

% clickable references
\usepackage{hyperref}

% used for URLs in the bibliography
\usepackage{url}

% used for automatically naming environments, configuration below
\usepackage[capitalise]{cleveref} 
\usepackage{aliascnt} % Helps cleveref distinguish shared counters 

% used for fancy script font mathscr
\usepackage{mathrsfs}

% allows \begin{enumerate}[(a)]
\usepackage[shortlabels]{enumitem}

% used for code listings, configuration below
 \usepackage{listings}

% font packages 
\usepackage{libertine}
\usepackage{inconsolata}

% infrastructure for theorem names, actual names configured below
\usepackage{amsthm} 



% ********** configuration for various packages ************


%  ******** configuration for amsthm **********
% amsthm provides infrastructure for theorem-like environments, but it does not define the environments themselves. This is done below.
\newcommand\@thmheadfont{\bfseries}
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]

% Use aliascnt to help cleveref distinguish shared counters
\newaliascnt{lemma}{theorem}
\newtheorem{lemma}[lemma]{Lemma}
\aliascntresetthe{lemma}

\newaliascnt{proposition}{theorem}
\newtheorem{proposition}[proposition]{Proposition}
\aliascntresetthe{proposition}

\newaliascnt{corollary}{theorem}
\newtheorem{corollary}[corollary]{Corollary}
\aliascntresetthe{corollary}

\newaliascnt{definition}{theorem}
\newtheorem{definition}[definition]{Definition}
\aliascntresetthe{definition}

\newaliascnt{conjecture}{theorem}
\newtheorem{conjecture}[conjecture]{Conjecture}
\aliascntresetthe{conjecture}

\newaliascnt{fact}{theorem}
\newtheorem{fact}[fact]{Fact}
\aliascntresetthe{fact}

\newaliascnt{claim}{theorem}
\newtheorem{claim}[claim]{Claim}
\aliascntresetthe{claim}

\newaliascnt{subclaim}{theorem}
\newtheorem{subclaim}[subclaim]{Subclaim}
\aliascntresetthe{subclaim}

\newaliascnt{exampl}{theorem}
\newtheorem{exampl}[exampl]{Example}
\aliascntresetthe{exampl}

\newaliascnt{observation}{theorem}
\newtheorem{observation}[observation]{Observation}
\aliascntresetthe{observation}

\newtheorem{sublemma}{Lemma}[theorem]

% ********* configuration for cleveref (after theorem definitions) ***********
% cleveref: a package that allows the cref command, which automatically writes Lemma or Theorem etc, depending on the referenced object
% Configuration that allows cleveref to use capitalized names
\crefname{theorem}{Theorem}{Theorems}
\crefname{lemma}{Lemma}{Lemmas}
\crefname{definition}{Definition}{Definitions}
\crefname{proposition}{Proposition}{Propositions}
\crefname{corollary}{Corollary}{Corollaries}
\crefname{claim}{Claim}{Claims}
\crefname{example}{Example}{Examples}
\crefname{remark}{Remark}{Remarks}
\crefname{section}{Section}{Sections}
\crefname{equation}{Equation}{Equations}


%  *********** configurations for listings ***********
%  default configuration for listings, which uses python style
\lstset{
    basicstyle=\ttfamily\footnotesize, % Code font and size
    % keywordstyle=\color{blue}\bfseries, % Keywords in bold blue
    commentstyle=\color{gray}, % Comments in gray
    stringstyle=\color{red}, % Strings in red
    numbers=left, % Line numbers on the left
    numberstyle=\tiny\color{gray}, % Line number style
    stepnumber=1, % Line number step
    numbersep=5pt, % Space between line numbers and code
    backgroundcolor=\color{lightgray!20}, % Light gray background
    % frame=single, % Frame around the code
    tabsize=4, % Tab size
    breaklines=true, % Line breaking
    captionpos=b, % Caption position (bottom)
    language=Python, % Default language
    mathescape=true, % Allow math mode in code
    escapechar=|,
    aboveskip=10pt, % Space above the listing
    belowskip=10pt,  % Space below the listing
    xleftmargin=15pt, % Left margin inside the box
    xrightmargin=15pt % Right margin inside the box
}



% ************** remaining macros ***************



%  ******* pictures **********

% picture macros. Here is the setup. I use figma to generate a pdf file, in the directory of main.tex, which typically has some name based on the project, e.g. definable-clique.pdf. (This is because figma automatically uses the name of the project inside figma as the name of the pdf export, and it would be a hassle to always rename it.) The pdf has one page per picture, and the mypic command inputs the page number and shows the picture. 
\usepackage{graphicx}

% the core command, which contains the name of the file and the desired scaling factor. These are subject to per-project customization
\newcommand{\mypiccore}[1]{
	\includegraphics[page=#1,scale=0.15]{definable-clique}
}

% show the picture centered
\newcommand{\mypic}[1]{
	\begin{center}
		\mypiccore{#1}
	\end{center}
}

% show two pictures centered
\newcommand{\mypicdouble}[2]{
	\begin{center}
		\mypiccore{#1} \quad \mypiccore{#2}
	\end{center}
}

% an environment that makes numbered inline pictures, similar to numbered equations
\newcounter{mypic}
\newenvironment{numberedpic}[1][]{%
    \refstepcounter{mypic}%
     #1\par
    \vspace{0.5em}
}{%
    \vspace{0.5em}
}
\newcommand{\numpic}[2]{
	\begin{numberedpic}
        \label{#2}
        \begin{center}
            \begin{tabular}{cr}
                \begin{minipage}{0.85\columnwidth}
					\begin{center}
						\mypiccore{#1}
					\end{center}
                \end{minipage} & (\themypic)
            \end{tabular}
        \end{center}
    \end{numberedpic}
}




%  *********** small caps ************
%  I like to use small caps for abbreviations like mso, fo, etc. or complexity classes. For some reason, the trailing space is swalled in small caps, unless xspace from the following package is used
\usepackage{xspace}

% logics
\newcommand{\mso}{{\textsc{mso}}\xspace}
\newcommand{\cmso}{{\textsc{cmso}}\xspace}
\newcommand{\msoone}{{\sc mso}$_1$\xspace}
\newcommand{\msotwo}{{\sc mso}$_2$\xspace}
\newcommand{\fo}{{\sc fo}\xspace}
\newcommand{\ctlstar}{\textsc{ctl$^*$ }\xspace}
\newcommand{\ctl}{{\sc ctl}\xspace}
\newcommand{\ltl}{{\sc ltl}\xspace}

% complexity classes 
\newcommand{\pspace}{{\textsc{PSpace}}\xspace}
\newcommand{\ptime}{{\textsc{PTime}}\xspace}
\newcommand{\np}{{\textsc{NP}}\xspace}





% ********* myexample **********
%  A custom example environment. I think that the main feature is that it finishes with a box, so that it is clear where the example ends.
\newcounter{ourexamplecounter}
\newenvironment{myexample}{
\medskip
\refstepcounter{ourexamplecounter}
\smallskip\noindent{\textbf{{Example \arabic{ourexamplecounter}. }}}}{
$\Box$ \smallskip 
}



% *********** colours ***********
\usepackage{color} 

% these are colors consistent with my styles in figma
\definecolor{red}{RGB}{235,87,87}
\definecolor{blue}{RGB}{86,204,242}
\definecolor{orange}{RGB}{242,153,74}

\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\blue}[1]{{\color{blue}#1}}
\newcommand{\orange}[1]{{\color{orange}#1}}


%  ********** miscellaneous *************
% the rest of this style file is a list of miscellaneous macros. It should only contain macros that are expected to be used in many projects. Macros specific to a single project should not be added here, and should be in the preamble of the main.tex file.


% Custom underbrace and overbrace commands. They allow for annotations below and above the braces, possibly multiline
\newcommand{\myunderbrace}[2]{\underbrace{#1}_{\mathclap{\text{\scriptsize 
\begin{tabular}{c}
	#2
\end{tabular} }}}}
\newcommand{\myoverbrace}[2]{\overbrace{#1}^{\mathclap{\text{\scriptsize 
\begin{tabular}{c}
	#2
\end{tabular} }}}}


% TODOs 
\newcommand\po[1]{\todo[inline,size=\scriptsize,backgroundcolor=pink]{#1 - \textbf{Pierre}}}
\newcommand\mb[1]{\todo[inline,size=\scriptsize,backgroundcolor=yellow]{#1 - \textbf{Mikolaj}}}


% various kinds of numbers
\newcommand{\Nat}{{\mathbb N}}
\newcommand{\Rat}{{\mathbb Q}}
\newcommand{\Int}{{\mathbb Z}}
\newcommand{\field}{\mathbb F}
% not really numbers, but close
\newcommand{\Bool}{\mathsf{Bool}} 
% again, not really nunbers
\newcommand{\atoms}{\mathbb A}

% domain and range
\newcommand{\dom}{\operatorname{\mathrm{dom}}}
\newcommand{\ran}{\operatorname{\mathrm{ran}}}
\newcommand{\im}{\operatorname{\mathrm{im}}}
\newcommand{\arity}{\operatorname{\mathrm{ar}}}


% a set 
\newcommand{\set}[1]{\{#1\}}

% set builder expression, which can be multiline
\newcommand{\setbuild}[2]{\set{#1 \ | 
\begin{tabular}{l}
	#2
\end{tabular}}}

% a tuple, and also a generated subset
\newcommand{\tuple}[1]{\langle #1 \rangle}
\newcommand{\gen}[1]{\langle #1 \rangle}

% ignore, similar to commenting something out
\newcommand{\ign}[1]{}

% semantic brackets 
\newcommand{\sem}[1]{[\![#1]\!]}

%% Calligraphic
\newcommand{\Aa}{{\mathcal A}}
\newcommand{\Bb}{{\mathcal B}}
\newcommand{\Cc}{{\mathcal C}}
\newcommand{\Dd}{{\mathcal D}}
\newcommand{\Ee}{{\mathcal E}}
\newcommand{\Ff}{{\mathcal F}}
\newcommand{\Gg}{{\mathcal G}}
\newcommand{\Hh}{{\mathcal H}}
\newcommand{\Ii}{{\mathcal I}}
\newcommand{\Jj}{{\mathcal J}}
\newcommand{\Kk}{{\mathcal K}}
\newcommand{\Ll}{{\mathcal L}}
\newcommand{\Mm}{{\mathcal M}}
\newcommand{\Nn}{{\mathcal N}}
\newcommand{\Oo}{{\mathcal O}}
\newcommand{\Pp}{{\mathcal P}}
\newcommand{\Qq}{{\mathcal Q}}
\newcommand{\Rr}{{\mathcal R}}
\newcommand{\Ss}{{\mathcal S}}
\newcommand{\Tt}{{\mathcal T}}
\newcommand{\Uu}{{\mathcal U}}
\newcommand{\Vv}{{\mathcal V}}
\newcommand{\Ww}{{\mathcal W}}
\newcommand{\Xx}{\mathcal X}
\newcommand{\Yy}{{\mathcal Y}}
\newcommand{\Zz}{{\mathcal Z}}


% fancy italics for varieties
\newcommand{\algclass}{\mathscr A}
\newcommand{\langclass}{\mathscr L}

% algebras are in bold (not sure if this is the right choice)
\newcommand{\alga}{\mathbf{A}}
\newcommand{\algb}{\mathbf{B}}

% some type constructors
\newcommand{\pfin}{\mathsf{P}_{\mathrm{fin}}}
\newcommand{\multiset}{\mathsf{M}}
\newcommand{\trees}{\mathrm{trees}}


% tough foreign names
\newcommand{\schutz}{Sch\"utzenberger\xspace}
\newcommand{\buchi}{B\"uchi\xspace}

% miscellaneous
\newcommand{\eqdef}{\stackrel{\text{def}}=}
\newcommand{\downset}[1]{#1\!\downarrow}
\newcommand{\xor}{\oplus}